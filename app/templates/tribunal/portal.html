{% extends "base.html" %}

{% block title %}Portal del Tribunal - {{ super() }}{% endblock %}

{% block content %}
<div class="mb-4">
    <h2>Portal del Tribunal - {{ persona.nombre }} {{ persona.apellido }}</h2>
</div>



<h3 class="mb-3">Concursos Asignados</h3>

{% if concursos %}
<div class="table-responsive tribunal-table">
    <table class="table table-striped table-hover">
        <thead class="table-light">
            <tr>
                <th>ID</th>
                <th>Departamento</th>
                <th>Área</th>
                <th>Categoría</th>
                <th>Dedicación</th>
                <th>Su Rol</th>
                <th>Estado</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for concurso in concursos %}
            <tr>
                <td>{{ concurso.id }}</td>
                <td>{{ concurso.departamento_rel.nombre }}</td>
                <td>{{ concurso.area }}</td>
                <td>{{ concurso.categoria }}</td>                <td>{{ concurso.dedicacion }}</td>                <td>
                    <span class="badge badge-tribunal-primary" style="background-color: #2563eb !important; color: white !important;">{{ concurso_roles[concurso.id] }}</span>
                </td>
                <td>
                    {% if concurso.estado_actual == 'CREADO' %}
                        <span class="badge badge-tribunal-success" style="background-color: #059669 !important; color: white !important;">{{ concurso.estado_actual }}</span>
                    {% elif concurso.estado_actual == 'EN_PROCESO' %}
                        <span class="badge badge-tribunal-warning" style="background-color: #d97706 !important; color: white !important;">{{ concurso.estado_actual }}</span>
                    {% elif concurso.estado_actual == 'FINALIZADO' %}
                        <span class="badge badge-tribunal-info" style="background-color: #0891b2 !important; color: white !important;">{{ concurso.estado_actual }}</span>
                    {% else %}
                        <span class="badge badge-tribunal-secondary" style="background-color: #6b7280 !important; color: white !important;">{{ concurso.estado_actual }}</span>
                    {% endif %}
                </td>
                <td>
                    <a href="{{ url_for('tribunal.portal_concurso', concurso_id=concurso.id) }}" 
                       class="btn btn-sm btn-tribunal-accent">
                        <i class="bi bi-eye"></i> Ver Detalles
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="alert alert-tribunal-info">
    No tiene concursos asignados actualmente.
</div>
{% endif %}
{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/tribunal.css') }}?v=2.0">
<style>
/* Additional inline styles to ensure badge colors work */
.badge-tribunal-primary { background-color: #2563eb !important; color: white !important; }
.badge-tribunal-secondary { background-color: #6b7280 !important; color: white !important; }
.badge-tribunal-accent { background-color: #f97316 !important; color: white !important; }
.badge-tribunal-success { background-color: #059669 !important; color: white !important; }
.badge-tribunal-warning { background-color: #d97706 !important; color: white !important; }
.badge-tribunal-info { background-color: #0891b2 !important; color: white !important; }
</style>
{% endblock %}
